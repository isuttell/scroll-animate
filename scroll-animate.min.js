/*!
 * scroll-animate v0.1.0 - https://github.com/isuttell/scroll-animate
 * Animate elements by scroll position
 * Contributor(s): Isaac Suttell <isaac@isaacsuttell.com>
 */

!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["lodash","jquery","exports",function(c,d,e){a.ScrollAnimate=b(a,e,c,d)}]):a.ScrollAnimate=b(a,{},a._,a.jQuery)}(this,function(a,ScrollAnimate,b,c){"use strict";function d(a){m=!0,a.preventDefault&&a.preventDefault(),a.originalEvent.wheelDelta?o=a.originalEvent.wheelDelta/120:a.originalEvent.detail&&(o=-a.originalEvent.detail/3),h.loop||l()}for(var e=["ms","moz","webkit","o"],f=0;f<e.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[e[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[f]+"CancelAnimationFrame"]||window[e[f]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var g=0;window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-g)),d=window.setTimeout(function(){a(b+c)},c);return g=b+c,d}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var h={loop:!0,smoothScroll:{enabled:!1,speed:15}},i={$el:!1,scroll:{min:0,max:1e3},values:{start:0,stop:1},property:"opacity"};ScrollAnimate.options=function(a){return"object"==typeof a?(h=b.defaults(a,h),this):h},ScrollAnimate.run=function(a){return this.options(a||{}),k=!1,h.loop&&q(),this.addEventListeners(),this},ScrollAnimate.addEventListeners=function(){return h.smoothScroll.enabled||c(window).scroll(b.throttle(l,17)).scroll(),h.smoothScroll.enabled&&c(window).bind("mousewheel DOMMouseScroll",d),this},ScrollAnimate.removeEventListeners=function(){return h.smoothScroll.enabled||c(window).unbind("scroll",l),h.smoothScroll.enabled&&c(window).unbind("mousewheel DOMMouseScroll",d),this};var j=[],k=!0;ScrollAnimate.pause=function(){return k=!0,this},ScrollAnimate.play=function(){return k=!1,this},ScrollAnimate.toggle=function(){return k=!k,this},ScrollAnimate.running=function(a){return"boolean"!=typeof a?!k:void(k=!a)};var l=function(){window.requestAnimationFrame(q)},m=!1,n=0,o=0;ScrollAnimate.reset=function(){return j=[],this},ScrollAnimate.add=function(a){if(a=b.defaults(a,i),a.$el){for(var c=0;c<j.length;c++){if(a.$el.is(j[c].$el)){a.id=j[c].id;break}a.id=b.uniqueId("el")}"function"==typeof a.tween&&(a.tween=a.tween(a.$el).pause()),j.push(a)}return this};var p=null,q=function(){var a,b=c(window).scrollTop();if(k!==!0&&b!==p){var d=[];for(a=0;a<j.length;a++){var e=j[a].scroll.start,f=j[a].scroll.stop;"function"==typeof e&&(e=e(j[a].$el)),"function"==typeof f&&(f=f(j[a].$el));var g=j[a].values.start,i=j[a].values.stop;"function"==typeof g&&(g=g(j[a].$el)),"function"==typeof i&&(i=i(j[a].$el));var l=r(b,e,f),s=i-g,t=l*s+g;"object"==typeof j[a].tween&&"function"==typeof j[a].tween.progress?j[a].tween.progress(l):"transform"===j[a].property?(d[j[a].id]=d[j[a].id]||{$el:j[a].$el,value:""},d[j[a].id].value+=" "+j[a].transform.replace("%s",t)):"scrollTop"===j[a].property?j[a].$el.scrollTop(t):j[a].$el.css(j[a].property,t)}for(a in d)d[a].$el.css("transform",d[a].value)}p=b,h.smoothScroll.enabled&&m&&(window.scrollBy(0,-o*h.smoothScroll.speed),n++,n>10&&(n=0,m=!1,o=0)),h.loop&&window.requestAnimationFrame(q)},r=function(a,b,c){var d=a-b,e=c-b;return 0>d?0:d>e?1:d/e};return ScrollAnimate});