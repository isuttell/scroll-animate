/*!
 * scroll-animate v0.1.0 - https://github.com/isuttell/scroll-animate
 * Animate elements by scroll position
 * Contributor(s): Isaac Suttell <isaac@isaacsuttell.com>
 */

!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery","exports",function(c,d){a.ScrollAnimate=b(a,d,c)}]):a.ScrollAnimate=b(a,{},a.jQuery)}(this,function(a,ScrollAnimate,b){"use strict";function c(a){o=!0,a.preventDefault&&a.preventDefault(),a.originalEvent.wheelDelta?q=a.originalEvent.wheelDelta/120:a.originalEvent.detail&&(q=-a.originalEvent.detail/3),i.loop||n()}function d(a,b,c){var d=a-b,e=c-b;return 0>d?0:d>e?1:d/e}function e(a,b){for(var c in b)"object"==typeof b[c]?a[c]=e(a[c]||{},b[c]):"undefined"==typeof a[c]&&(a[c]=b[c]);return a}for(var f=["ms","moz","webkit","o"],g=0;g<f.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[f[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[g]+"CancelAnimationFrame"]||window[f[g]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var h=0;window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-h)),d=window.setTimeout(function(){a(b+c)},c);return h=b+c,d}}window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var i={loop:!0,smoothScroll:{enabled:!1,speed:15}},j={$el:!1,scroll:{min:0,max:1e3},values:{start:0,stop:1},property:"opacity"};ScrollAnimate.options=function(a){return"object"==typeof a?(i=e(a,i),this):i},ScrollAnimate.run=function(a){return this.options(a||{}),l=!1,i.loop&&t(),this.addEventListeners(),this},ScrollAnimate.addEventListeners=function(){return i.smoothScroll.enabled||(n(),b(window).scroll(n)),i.smoothScroll.enabled&&b(window).bind("mousewheel DOMMouseScroll",c),this},ScrollAnimate.removeEventListeners=function(){return i.smoothScroll.enabled||b(window).unbind("scroll",n),i.smoothScroll.enabled&&b(window).unbind("mousewheel DOMMouseScroll",c),this};var k=[];ScrollAnimate._getItems=function(){return k};var l=!0;ScrollAnimate.pause=function(){return l=!0,this},ScrollAnimate.play=function(){return l=!1,this},ScrollAnimate.toggle=function(){return l=!l,this},ScrollAnimate.running=function(a){return"boolean"!=typeof a?!l:void(l=!a)};var m=(new Date).getTime(),n=function(){(new Date).getTime()-m>16&&(m=(new Date).getTime(),window.requestAnimationFrame(t))},o=!1,p=0,q=0;ScrollAnimate.clear=function(){return k=[],this};var r=0;ScrollAnimate.add=function(a){if(a=e(a,j),a.$el){a.id="el"+r++;for(var b=0;b<k.length;b++)a.$el.is(k[b].$el)&&(a.id=k[b].id);"function"==typeof a.tween&&(a.tween=a.tween(a.$el).pause()),k.push(a)}return this};var s=null,t=function(){var a,c=b(window).scrollTop();if(l!==!0&&c!==s){var e=[];for(a=0;a<k.length;a++){var f=k[a].scroll.start,g=k[a].scroll.stop;"function"==typeof f&&(f=f(k[a].$el)),"function"==typeof g&&(g=g(k[a].$el));var h=k[a].values.start,j=k[a].values.stop;"function"==typeof h&&(h=h(k[a].$el)),"function"==typeof j&&(j=j(k[a].$el));var m=d(c,f,g),n=j-h,r=m*n+h;"object"==typeof k[a].tween&&"function"==typeof k[a].tween.progress?k[a].tween.progress(m):"transform"===k[a].property?(e[k[a].id]=e[k[a].id]||{$el:k[a].$el,value:""},e[k[a].id].value+=" "+k[a].transform.replace("%s",r)):"scrollTop"===k[a].property?k[a].$el.scrollTop(r):k[a].$el.css(k[a].property,r)}for(a in e)e[a].$el.css("transform",e[a].value)}s=c,i.smoothScroll.enabled&&o&&(window.scrollBy(0,-q*i.smoothScroll.speed),p++,p>10&&(p=0,o=!1,q=0)),i.loop&&window.requestAnimationFrame(t)};return ScrollAnimate});