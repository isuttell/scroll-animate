/*!
 * scroll-animate v0.1.0 - https://github.com/isuttell/scroll-animate
 * Animate elements by scroll position
 * Contributor(s): Isaac Suttell <isaac@isaacsuttell.com>
 */

!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["lodash","jquery","exports",function(c,d,e){a.ScrollAnimate=b(a,e,c,d)}]):a.ScrollAnimate=b(a,{},a._,a.jQuery)}(this,function(a,ScrollAnimate,b,c){"use strict";function d(a){j=!0,a.preventDefault&&a.preventDefault(),a.wheelDelta?l=a.wheelDelta/120:a.detail&&(l=-a.detail/3),e.loop||i()}var e=ScrollAnimate.options={loop:!1,smoothScroll:{enabled:!1,speed:15}},f=[],g=!0,h={$el:!1,scroll:{min:0,max:1e3},values:{start:0,stop:1},property:"opacity"};ScrollAnimate.run=function(){g=!1,e.loop?n():e.smoothScroll.enabled||c(window).scroll(b.throttle(i,17)).scroll(),e.smoothScroll.enabled&&(window.addEventListener("mousewheel",d,!1),window.addEventListener("DOMMouseScroll",d,!1))},ScrollAnimate.pause=function(){g=!0},ScrollAnimate.play=function(){g=!1},ScrollAnimate.toggle=function(){g=!g},ScrollAnimate.running=function(a){return"boolean"!=typeof a?!g:void(g=!a)};var i=function(){window.requestAnimationFrame?window.requestAnimationFrame(n):n()},j=!1,k=0,l=0;ScrollAnimate.destroy=function(){e.smoothScroll.enabled||c(window).unbind("scroll",i),e.smoothScroll.enabled&&(window.removeEventListener("mousewheel",d,!1),window.removeEventListener("DOMMouseScroll",d,!1))},ScrollAnimate.add=function(a){if(a=b.defaults(a,h),a.$el){for(var c=0;c<f.length;c++){if(a.$el.is(f[c].$el)){a.id=f[c].id;break}a.id=b.uniqueId("el")}"function"==typeof a.tween&&(a.tween=a.tween(a.$el).pause()),f.push(a)}return this};var m=null,n=function(){var a,b=c(window).scrollTop();if(g!==!0&&b!==m){var d=[];for(a=0;a<f.length;a++){var h=f[a].scroll.start,i=f[a].scroll.stop;"function"==typeof h&&(h=h(f[a].$el)),"function"==typeof i&&(i=i(f[a].$el));var p=f[a].values.start,q=f[a].values.stop;"function"==typeof p&&(p=p(f[a].$el)),"function"==typeof q&&(q=q(f[a].$el));var r=o(b,h,i),s=q-p,t=r*s+p;"object"==typeof f[a].tween&&"function"==typeof f[a].tween.progress?f[a].tween.progress(r):"transform"===f[a].property?(d[f[a].id]=d[f[a].id]||{$el:f[a].$el,value:""},d[f[a].id].value+=" "+f[a].transform.replace("%s",t)):"scrollTop"===f[a].property?f[a].$el.scrollTop(t):f[a].$el.css(f[a].property,t)}for(a in d)d[a].$el.css("transform",d[a].value)}m=b,e.smoothScroll.enabled&&j&&(window.scrollBy(0,-l*e.smoothScroll.speed),k++,k>10&&(k=0,j=!1,l=0)),e.loop&&(window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,0))},o=function(a,b,c){var d=a-b,e=c-b;return 0>d?0:d>e?1:d/e};return ScrollAnimate});